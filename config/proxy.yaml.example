# Gemini API ä»£ç†æœåŠ¡å®Œæ•´é…ç½®ç¤ºä¾‹
# 
# ğŸ¯ ä½¿ç”¨è¯´æ˜:
# 1. å¤åˆ¶æ­¤æ–‡ä»¶ä¸º proxy.yaml
# 2. æ ¹æ®ç¯å¢ƒéœ€æ±‚ä¿®æ”¹é…ç½®
# 3. ç¡®ä¿æ•æ„Ÿä¿¡æ¯å®‰å…¨å­˜å‚¨

# ğŸŒ æœåŠ¡å™¨é…ç½®
server:
  host: "0.0.0.0"              # ç›‘å¬åœ°å€ï¼Œ0.0.0.0 è¡¨ç¤ºç›‘å¬æ‰€æœ‰æ¥å£
  port: 8443                   # HTTPS ç›‘å¬ç«¯å£
  workers: 4                   # å·¥ä½œçº¿ç¨‹æ•°ï¼Œå»ºè®®è®¾ç½®ä¸º CPU æ ¸å¿ƒæ•°
  max_connections: 1000        # æœ€å¤§å¹¶å‘è¿æ¥æ•°
  
  # ğŸ”’ TLS é…ç½®
  tls:
    enabled: true              # ç”Ÿäº§ç¯å¢ƒæ¨èå¯ç”¨ TLS
    cert_path: "certs/cert.pem"         # è¯ä¹¦æ–‡ä»¶è·¯å¾„
    key_path: "certs/key.pem"           # ç§é’¥æ–‡ä»¶è·¯å¾„
    
    # ğŸ¤– ACME è‡ªåŠ¨è¯ä¹¦é…ç½®ï¼ˆå¯é€‰ï¼‰
    acme:
      enabled: false           # æ˜¯å¦å¯ç”¨ ACME è‡ªåŠ¨è¯ä¹¦
      domains:                 # åŸŸååˆ—è¡¨
        - "api.example.com"
        - "proxy.example.com"
      email: "admin@example.com"              # Let's Encrypt è”ç³»é‚®ç®±
      directory_url: "https://acme-v02.api.letsencrypt.org/directory"  # ç”Ÿäº§ç¯å¢ƒ
      # æµ‹è¯•ç¯å¢ƒä½¿ç”¨: "https://acme-staging-v02.api.letsencrypt.org/directory"

# ğŸ”‘ Gemini API é…ç½®
gemini:
  # API å¯†é’¥é…ç½®ï¼ˆæ”¯æŒå¤šä¸ªå¯†é’¥è´Ÿè½½å‡è¡¡ï¼‰
  api_keys:
    - id: "primary"            # å¯†é’¥æ ‡è¯†ç¬¦
      key: "your-gemini-api-key-1"           # å®é™…çš„ API å¯†é’¥
      weight: 100              # æƒé‡ï¼Œå½±å“è´Ÿè½½åˆ†é…
      max_requests_per_minute: 100           # æ¯åˆ†é’Ÿæœ€å¤§è¯·æ±‚æ•°
    
    - id: "backup"             # å¤‡ç”¨å¯†é’¥
      key: "your-gemini-api-key-2"
      weight: 50
      max_requests_per_minute: 60
    
    # å¯ä»¥æ·»åŠ æ›´å¤šå¯†é’¥...
    # - id: "high_volume"
    #   key: "your-gemini-api-key-3"
    #   weight: 150
    #   max_requests_per_minute: 200
  
  base_url: "https://generativelanguage.googleapis.com"  # Gemini API åŸºç¡€ URL
  timeout_seconds: 30          # è¯·æ±‚è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰

# ğŸ” è®¤è¯é…ç½®
auth:
  enabled: true                # æ˜¯å¦å¯ç”¨è®¤è¯
  jwt_secret: "your-secure-jwt-secret-key-at-least-32-characters-long"  # JWT å¯†é’¥ï¼ˆè‡³å°‘32å­—ç¬¦ï¼‰
  rate_limit_per_minute: 100   # æ¯åˆ†é’Ÿè¯·æ±‚é™åˆ¶
  admin_password: "your-secure-admin-password-12chars+"  # ç®¡ç†å‘˜å¯†ç ï¼ˆè‡³å°‘12å­—ç¬¦ï¼‰
  token_expiry_hours: 24       # Token è¿‡æœŸæ—¶é—´ï¼ˆå°æ—¶ï¼‰
  refresh_token_enabled: true  # æ˜¯å¦å¯ç”¨åˆ·æ–° Token
  session_timeout_minutes: 60  # ä¼šè¯è¶…æ—¶æ—¶é—´ï¼ˆåˆ†é’Ÿï¼‰
  max_login_attempts: 5        # æœ€å¤§ç™»å½•å°è¯•æ¬¡æ•°
  lockout_duration_minutes: 15 # é”å®šæ—¶é—´ï¼ˆåˆ†é’Ÿï¼‰

# ğŸ“Š ç›‘æ§æŒ‡æ ‡é…ç½®
metrics:
  enabled: true                # æ˜¯å¦å¯ç”¨ç›‘æ§
  prometheus_port: 9090        # API æœåŠ¡å™¨ç«¯å£
  tls:                         # API æœåŠ¡å™¨ TLS é…ç½®ï¼ˆå¯é€‰ï¼‰
    enabled: false             # æ˜¯å¦ä¸º API æœåŠ¡å™¨å¯ç”¨ TLS
    cert_path: "certs/api-cert.pem"        # API æœåŠ¡å™¨è¯ä¹¦è·¯å¾„
    key_path: "certs/api-key.pem"          # API æœåŠ¡å™¨ç§é’¥è·¯å¾„

# ğŸ“ é…ç½®ç¤ºä¾‹æ®µè½
# 
# ğŸ¢ ç”Ÿäº§ç¯å¢ƒé…ç½®ç¤ºä¾‹:
# server:
#   host: "0.0.0.0"
#   port: 443
#   workers: 8
#   max_connections: 5000
#   tls:
#     enabled: true
#     cert_path: "/etc/ssl/certs/proxy.crt"
#     key_path: "/etc/ssl/private/proxy.key"
#     acme:
#       enabled: true
#       domains:
#         - "api.yourcompany.com"
#       email: "ssl@yourcompany.com"
#       directory_url: "https://acme-v02.api.letsencrypt.org/directory"
# 
# gemini:
#   api_keys:
#     - id: "prod-primary"
#       key: "AIzaSyD..."
#       weight: 200
#       max_requests_per_minute: 300
#     - id: "prod-backup"
#       key: "AIzaSyE..."
#       weight: 100
#       max_requests_per_minute: 200
#   timeout_seconds: 60
# 
# auth:
#   enabled: true
#   jwt_secret: "production-super-secure-secret-key-change-this-in-production-environment"
#   admin_password: "ProducTion@SecuRe#PassworD2024!"
#   rate_limit_per_minute: 200
#   token_expiry_hours: 8
#   session_timeout_minutes: 30
#   max_login_attempts: 3
#   lockout_duration_minutes: 30
# 
# metrics:
#   enabled: true
#   prometheus_port: 9090
#   tls:
#     enabled: true
#     cert_path: "/etc/ssl/certs/api.crt"
#     key_path: "/etc/ssl/private/api.key"

# ğŸ”§ å¼€å‘ç¯å¢ƒé…ç½®ç¤ºä¾‹:
# server:
#   host: "127.0.0.1"
#   port: 8080
#   workers: 2
#   max_connections: 100
#   tls:
#     enabled: false  # å¼€å‘ç¯å¢ƒå¯ä»¥ç¦ç”¨ TLS
# 
# gemini:
#   api_keys:
#     - id: "dev-key"
#       key: "your-dev-api-key"
#       weight: 100
#       max_requests_per_minute: 60
#   timeout_seconds: 30
# 
# auth:
#   enabled: true
#   jwt_secret: "development-jwt-secret-key-32chars"
#   admin_password: "dev-password-123"
#   rate_limit_per_minute: 60
#   token_expiry_hours: 24
#   session_timeout_minutes: 120
# 
# metrics:
#   enabled: true
#   prometheus_port: 9090

# ğŸ“‹ é‡è¦è¯´æ˜:
#
# ğŸ” å®‰å…¨è¦æ±‚:
# 1. JWT å¯†é’¥å¿…é¡»è‡³å°‘ 32 ä¸ªå­—ç¬¦é•¿åº¦
# 2. ç®¡ç†å‘˜å¯†ç å»ºè®®è‡³å°‘ 12 ä¸ªå­—ç¬¦ï¼ŒåŒ…å«å¤§å°å†™å­—æ¯ã€æ•°å­—ã€ç‰¹æ®Šå­—ç¬¦
# 3. API å¯†é’¥éœ€è¦ä» Google AI Studio è·å–æœ‰æ•ˆå¯†é’¥
# 4. ç”Ÿäº§ç¯å¢ƒå¼ºçƒˆå»ºè®®å¯ç”¨ TLS
# 
# âš¡ æ€§èƒ½è°ƒä¼˜:
# 1. workers æ•°é‡å»ºè®®è®¾ç½®ä¸º CPU æ ¸å¿ƒæ•°
# 2. max_connections æ ¹æ®å®é™…è´Ÿè½½å’ŒæœåŠ¡å™¨æ€§èƒ½è°ƒæ•´
# 3. API å¯†é’¥çš„ weight å½±å“è´Ÿè½½åˆ†é…ï¼Œåˆç†è®¾ç½®æƒé‡
# 4. timeout_seconds æ ¹æ®ç½‘ç»œç¯å¢ƒå’Œå“åº”æ—¶é—´è¦æ±‚è°ƒæ•´
# 
# ğŸ” ç›‘æ§å»ºè®®:
# 1. å¯ç”¨ metrics ä»¥ä¾¿ Prometheus ç›‘æ§
# 2. å®šæœŸæ£€æŸ¥ /health ç«¯ç‚¹
# 3. ç›‘æ§ /performance å’Œ /errors ç«¯ç‚¹
# 4. è®¾ç½®é€‚å½“çš„å‘Šè­¦é˜ˆå€¼
# 
# ğŸ”„ ç»´æŠ¤å»ºè®®:
# 1. å®šæœŸè½®æ¢ API å¯†é’¥ä»¥æé«˜å®‰å…¨æ€§
# 2. å¤‡ä»½é…ç½®æ–‡ä»¶å’Œæƒé‡é¢„è®¾
# 3. å®šæœŸæ›´æ–° TLS è¯ä¹¦
# 4. ç›‘æ§å®¡è®¡æ—¥å¿—ä¸­çš„å¼‚å¸¸è®¿é—®æ¨¡å¼